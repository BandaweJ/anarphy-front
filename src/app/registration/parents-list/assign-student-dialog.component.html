<h2 mat-dialog-title>Assign Student to {{ data.parent.email }}</h2>

<mat-dialog-content class="dialog-content">
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Search students</mat-label>
    <input
      matInput
      [formControl]="searchControl"
      placeholder="Search by student number, name, or phone..."
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>

  <div class="results-container">
    <table mat-table [dataSource]="filteredStudents" class="students-table">
      <!-- Student Number -->
      <ng-container matColumnDef="studentNumber">
        <th mat-header-cell *matHeaderCellDef>Student ID</th>
        <td mat-cell *matCellDef="let s">
          <span class="student-id">{{ s.studentNumber }}</span>
        </td>
      </ng-container>

      <!-- Name -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let s">
          {{ s.surname }}, {{ s.name }}
        </td>
      </ng-container>

      <!-- Phone -->
      <ng-container matColumnDef="cell">
        <th mat-header-cell *matHeaderCellDef>Phone</th>
        <td mat-cell *matCellDef="let s">
          {{ s.cell }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['studentNumber', 'name', 'cell']"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: ['studentNumber', 'name', 'cell']"
        (click)="chooseStudent(row)"
        class="clickable-row"
      ></tr>
    </table>

    <p class="hint" *ngIf="filteredStudents.length === 0">
      No students match your search.
    </p>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancel</button>
</mat-dialog-actions>


